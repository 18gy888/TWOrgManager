(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["iuc-orgmanagement-orgmanagement"],{"144d":function(t,e,a){"use strict";a.r(e);var i=a("f7a3"),n=a("733a");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);var c,r=a("f0c5"),u=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"7b97ba6c",null,!1,i["a"],c);e["default"]=u.exports},"733a":function(t,e,a){"use strict";a.r(e);var i=a("adb9"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},adb9:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={onLoad:function(t){var e=this;uni.post("/api/security/GetOrgDetail",{id:t.departId?t.departId:null},function(t){t.success&&(e.orgInfo=t.data,e.teachers=t.teachers,e.users=t.users,e.getMembers(),e.getActivities(),e.getApplicates())})},data:function(){return{TabCur:0,scrollLeft:0,tabTitle:["成员管理","社团活动","成员审核","社团管理"],orgInfo:{},teachers:{},users:{},pager:{member:{page:1,pageSize:20},applicate:{page:1,pageSize:20},activity:{page:1,pageSize:20}},tableData:{member:{},applicate:{},activity:{}},modalName:"",memberInfo:{}}},methods:{hideModal:function(){this.modalName=""},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},getMembers:function(t,e){var a=this;this.pager.member.page=t||this.pager.member.page,this.pager.member.pageSize=e||this.pager.member.pageSize,uni.post("/api/security/GetUsersByDepartId",{departId:this.orgInfo.ID,name:name,page:this.pager.member.page,pageSize:this.pager.member.pageSize},function(t){a.tableData.member=t.data})},getApplicates:function(t,e){var a=this;this.pager.member.page=t||this.pager.member.page,this.pager.member.pageSize=e||this.pager.member.pageSize,uni.post("/api/security/GetApplicationsByDeparts",{departId:this.orgInfo.ID,name:name,page:this.pager.applicate.page,pageSize:this.pager.applicate.pageSize},function(t){a.tableData.applicate=t.data})},getActivities:function(t,e){var a=this;this.pager.activity.page=t||this.pager.activity.page,this.pager.activity.pageSize=e||this.pager.activity.pageSize,uni.post("/api/org/GetActByDepartId",{Id:this.orgInfo.ID,page:this.pager.activity.page,pageSize:this.pager.activity.pageSize},function(t){a.tableData.activity=t.data})},getMemberDetail:function(t){var e=this;uni.post("/api/security/GetUserById",{id:t.ID,departId:this.orgInfo.ID},function(t){e.modalName="memberModal",e.memberInfo=t})},acceptApplication:function(t){var e=this;uni.post("/api/security/AcceptApplicate",{appId:t},function(t){t.success&&e.getApplicates()})},addActivity:function(){uni.post("/api/org/Applicate",{id:this.orgInfo.ID},function(t){t.success&&uni.navigateTo({url:"../activity/activity?instanceId="+t.instanceId+"&stepId="+t.stepId})})},rejectApplication:function(t){var e=this;uni.xios.post("/api/security/DenyApplicate",{appId:t},function(t){t.success&&e.getApplicates()})},delMember:function(t){var e=this;uni.post("/api/security/RemoveUserV2",{userId:t.ID,departId:t.departId},function(t){t.success&&e.getMembers()})},toActivity:function(t){uni.navigateTo({url:"../activity/activity?instanceId=".concat(t.InstanceId,"&stepId=").concat(t.StepId,"&detail=true")})}}};e.default=i},f7a3:function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("cu-custom",{attrs:{isBack:!0,bgColor:"bg-gradual-blue"}},[a("template",{attrs:{slot:"content"},slot:"content"},[t._v("社团管理")])],2),a("v-uni-scroll-view",{attrs:{"scroll-y":!0}},[a("v-uni-view",{staticClass:"margin"},[a("v-uni-text",{staticClass:"text-xl"},[t._v(t._s(t.orgInfo.Name))]),a("br"),a("v-uni-text",[t._v("指导老师：")]),t._l(t.teachers,function(e,i){return a("v-uni-text",{key:i},[t._v(t._s(e.RealName))])})],2),a("v-uni-scroll-view",{staticClass:"bg-white nav",attrs:{"scroll-x":!0,"scroll-with-animation":!0,"scroll-left":t.scrollLeft}},[t._l(t.tabTitle,function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-item",class:i==t.TabCur?"text-green cur":"",attrs:{"data-id":i},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSelect.apply(void 0,arguments)}}},[t._v(t._s(e))])}),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0==t.TabCur,expression:"TabCur == 0"}],staticClass:"cu-list menu"},[t._l(t.tableData.member,function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getMemberDetail(e)}}},[a("v-uni-view",{staticClass:"content"},[a("v-uni-text",{staticClass:"cuIcon-btn text-green"}),a("v-uni-text",{staticClass:"text-grey"},[t._v(t._s(e.RealName))]),e.isAdmin?a("v-uni-view",{staticClass:"cu-tag radius"},[t._v("管理员")]):t._e()],1),a("v-uni-view",{staticClass:"action"},[a("v-uni-button",{staticClass:"cu-btn round bg-red shadow margin-lr-xs",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.delMember(e)}}},[a("v-uni-text",{},[t._v("删除")])],1)],1)],1)}),a("v-uni-button",{staticClass:"margin",attrs:{disabled:""}},[t._v("增加成员")])],2),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1==t.TabCur,expression:"TabCur == 1"}],staticClass:"cu-list menu"},[t._l(t.tableData.activity,function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toActivity(e)}}},[a("v-uni-view",{staticClass:"content"},[a("v-uni-text",{staticClass:"cuIcon-btn text-green"}),a("v-uni-text",{staticClass:"text-grey"},[t._v(t._s(e.ActivityName))])],1)],1)}),a("v-uni-button",{staticClass:"margin",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addActivity.apply(void 0,arguments)}}},[t._v("创建活动")])],2),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2==t.TabCur,expression:"TabCur == 2"}],staticClass:"cu-list menu"},t._l(t.tableData.applicate,function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-item"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-text",{staticClass:"cuIcon-btn text-green"}),a("v-uni-text",{staticClass:"text-grey"},[t._v("申请人："+t._s(e.RealName))])],1),a("v-uni-view",{staticClass:"action"},[a("v-uni-button",{staticClass:"cu-btn round bg-blue shadow",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.acceptApplication(e.ID)}}},[a("v-uni-text",{},[t._v("通过")])],1),a("v-uni-button",{staticClass:"cu-btn round bg-red shadow margin-lr-xs",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.acceptApplication(e.ID)}}},[a("v-uni-text",{},[t._v("拒绝")])],1)],1)],1)}),1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:3==t.TabCur,expression:"TabCur == 3"}]},[a("v-uni-form",t._l(t.orgInfo,function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v(t._s(i))]),a("v-uni-input",{attrs:{name:"index"}}),t._v(t._s(e))],1)}),1)],1)],2),a("v-uni-view",{staticClass:"cu-tabbar-height"})],1),a("navTab",{attrs:{selection:0}}),a("v-uni-view",{staticClass:"cu-modal",class:"memberModal"===t.modalName?"show":""},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[a("v-uni-view",{staticClass:"content"},[t._v("成员详情")]),a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),a("v-uni-view",{staticClass:"padding-xl"},[t._v(t._s(t.memberInfo.user))])],1)],1)],1)},s=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return s}),a.d(e,"a",function(){return i})}}]);